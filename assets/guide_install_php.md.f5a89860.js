import{_ as s,o as a,c as p,O as l}from"./chunks/framework.379dab66.js";const m=JSON.parse('{"title":"PHP（可选）","description":"","frontmatter":{},"headers":[],"relativePath":"guide/install/php.md","filePath":"guide/install/php.md","lastUpdated":1677906817000}'),n={name:"guide/install/php.md"},e=l(`<h1 id="php-可选" tabindex="-1">PHP（可选） <a class="header-anchor" href="#php-可选" aria-label="Permalink to &quot;PHP（可选）&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">注意</p><p><strong>如果选择使用 <a href="https://www.mamp.info/en/mamp-pro/mac/" target="_blank" rel="noreferrer">MAMP</a>、<a href="https://laravel.com/docs/master/homestead" target="_blank" rel="noreferrer">Homestead</a> 或 <a href="https://laravel.com/docs/master/sail" target="_blank" rel="noreferrer">Sail</a> 作为开发环境的话，可以不使用这种方式单独安装 PHP。</strong></p></div><h2 id="php" tabindex="-1">PHP <a class="header-anchor" href="#php" aria-label="Permalink to &quot;PHP&quot;">​</a></h2><h3 id="安装-homebrew-php-tap" tabindex="-1">安装 <a href="https://github.com/shivammathur/homebrew-php" target="_blank" rel="noreferrer">homebrew-php</a> Tap <a class="header-anchor" href="#安装-homebrew-php-tap" aria-label="Permalink to &quot;安装 [homebrew-php](https://github.com/shivammathur/homebrew-php) Tap&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shivammathur/php</span></span></code></pre></div><h3 id="搜索当前可用php版本" tabindex="-1">搜索当前可用php版本 <a class="header-anchor" href="#搜索当前可用php版本" aria-label="Permalink to &quot;搜索当前可用php版本&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">php</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ==&gt; Formulae</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># brew-php-switcher ✔               phplint                           shivammathur/php/php@7.0          shivammathur/php/php@7.4-debug</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php ✔                             phpmd                             shivammathur/php/php@7.0-debug    # shivammathur/php/php@8.0 ✔</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php-code-sniffer                  phpmyadmin                        shivammathur/php/php@7.1          shivammathur/php/php@8.0-debug</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php-cs-fixer                      phpstan                           shivammathur/php/php@7.1-debug    shivammathur/php/php@8.1 ✔</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php-cs-fixer@2                    phpunit                           shivammathur/php/php@7.2          shivammathur/php/php@8.1-debug</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php@7.4 ✔                         shivammathur/php/php ✔            shivammathur/php/php@7.2-debug    shivammathur/php/php@8.3</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php@8.0 ✔                         shivammathur/php/php-debug        shivammathur/php/php@7.3 ✔        shivammathur/php/php@8.3-debug</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># php@8.1 ✔                         shivammathur/php/php@5.6          shivammathur/php/php@7.3-debug    pup</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># phpbrew                           shivammathur/php/php@5.6-debug    shivammathur/php/php@7.4 ✔        pcp</span></span></code></pre></div><h3 id="安装指定版本php" tabindex="-1">安装指定版本php <a class="header-anchor" href="#安装指定版本php" aria-label="Permalink to &quot;安装指定版本php&quot;">​</a></h3><p>这里以 <code>PHP 8.2</code> 为例。</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">php@8.2</span></span></code></pre></div><p>也可以安装其他版本的 PHP，比如再安装一个 <code>PHP 8.1</code></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">php@8.1</span></span></code></pre></div><h2 id="php-扩展" tabindex="-1">PHP 扩展 <a class="header-anchor" href="#php-扩展" aria-label="Permalink to &quot;PHP 扩展&quot;">​</a></h2><p>安装 <a href="https://github.com/shivammathur/homebrew-extensions" target="_blank" rel="noreferrer">shivammathur/extensions</a></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tap</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">shivammathur/extensions</span></span></code></pre></div><h3 id="mcrypt" tabindex="-1"><a href="https://pecl.php.net/package/mcrypt" target="_blank" rel="noreferrer">mcrypt</a> <a class="header-anchor" href="#mcrypt" aria-label="Permalink to &quot;[mcrypt](https://pecl.php.net/package/mcrypt)&quot;">​</a></h3><p>这里选择使用 <a href="https://pecl.php.net" target="_blank" rel="noreferrer">pecl</a> 进行安装，安装前先使用 <code>brew install mcrypt</code> 再 MacOS 上安装 mcrypt。</p><p>确定本机 <code>pecl</code> 可执行文件所在路径，比如在 Apple M1 电脑上给 <code>PHP 8.1</code> 安装 <code>mcrypt</code> 扩展，<code>pecl</code> 可执行命令 所在路径大概是：<code>/opt/homebrew/opt/php@8.1/bin/pecl</code></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 搜索要安装的扩展包</span></span>
<span class="line"><span style="color:#FFCB6B;">/opt/homebrew/opt/php@8.1/bin/pecl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mcrypt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装</span></span>
<span class="line"><span style="color:#FFCB6B;">arch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-arm64</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/opt/homebrew/opt/php@8.1/bin/pecl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在安装的过程中需要提供 libmcrypt 前缀</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 可以通过 \`locate libmcrypt\` 获取</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Apple M1 系统上的路径是 \`/opt/homebrew/opt/libmcrypt\`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Intel 系统上的路径是 \`/usr/local/opt/libmcrypt\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 直到编译完毕后出现下面的提示 ###</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Build process completed successfully</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Installing &#39;/opt/homebrew/Cellar/php@8.1/8.1.13/pecl/20210902/mcrypt.so&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># install ok: channel://pecl.php.net/mcrypt-1.0.5</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Extension mcrypt enabled in php.ini</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 配置</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 默认情况 php 的默认配置文件中已经加载了 \`mcrypt.so\` 扩展，也可以这部分配置将它们放在 conf.d/ 目录下统一管理</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 新建一个配置文件 /opt/homebrew/etc/php/8.1/conf.d/ext-mcrypt.ini</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;">EOT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /opt/homebrew/etc/php/8.1/conf.d/ext-mcrypt.ini</span></span>
<span class="line"><span style="color:#C3E88D;">[mcrypt]</span></span>
<span class="line"><span style="color:#C3E88D;">extension=mcrypt.so</span></span>
<span class="line"><span style="color:#89DDFF;">EOT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 检查</span></span>
<span class="line"><span style="color:#FFCB6B;">php</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mcrypt</span></span></code></pre></div><h3 id="yaml" tabindex="-1"><a href="https://pecl.php.net/package/yaml" target="_blank" rel="noreferrer">yaml</a> <a class="header-anchor" href="#yaml" aria-label="Permalink to &quot;[yaml](https://pecl.php.net/package/yaml)&quot;">​</a></h3><p>这里选择使用 <a href="https://pecl.php.net" target="_blank" rel="noreferrer">pecl</a> 进行安装，安装前先使用 <code>brew install libyaml</code> 再 MacOS 上安装 libyaml。</p><p>确定本机 <code>pecl</code> 可执行文件所在路径，比如在 Apple M1 电脑上给 <code>PHP 8.2</code> 安装 <code>libyaml</code> 扩展，<code>pecl</code> 可执行命令 所在路径大概是：<code>/opt/homebrew/opt/php@8.2/bin/pecl</code></p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 搜索要安装的扩展包</span></span>
<span class="line"><span style="color:#FFCB6B;">/opt/homebrew/opt/php@8.2/bin/pecl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yaml</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 安装</span></span>
<span class="line"><span style="color:#FFCB6B;">/opt/homebrew/opt/php@8.2/bin/pecl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yaml</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 在安装的过程中需要提供 libyaml 前缀</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 可以通过 \`locate libyaml\` 获取</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Apple M1 系统上的路径是 \`/opt/homebrew/opt/libyaml\`</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## Intel 系统上的路径是 \`/usr/local/opt/libyaml\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 直到编译完毕后出现下面的提示 ###</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Build process completed successfully</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Installing &#39;/opt/homebrew/Cellar/php/8.2.1/pecl/20220829/yaml.so&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># install ok: channel://pecl.php.net/yaml-2.2.2</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Extension yaml enabled in php.ini</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 配置</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 默认情况 php 的默认配置文件中已经加载了 \`yaml.so\` 扩展，也可以这部分配置将它们放在 conf.d/ 目录下统一管理</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">## 新建一个配置文件 /opt/homebrew/etc/php/8.2/conf.d/ext-yaml.ini</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;">EOT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /opt/homebrew/etc/php/8.2/conf.d/ext-yaml.ini</span></span>
<span class="line"><span style="color:#C3E88D;">[yaml]</span></span>
<span class="line"><span style="color:#C3E88D;">extension=yaml.so</span></span>
<span class="line"><span style="color:#89DDFF;">EOT</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 检查</span></span>
<span class="line"><span style="color:#FFCB6B;">php</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yaml</span></span></code></pre></div><h3 id="redis" tabindex="-1"><a href="https://pecl.php.net/package/redis" target="_blank" rel="noreferrer">redis</a> <a class="header-anchor" href="#redis" aria-label="Permalink to &quot;[redis](https://pecl.php.net/package/redis)&quot;">​</a></h3><p>选择使用源代码的方式安装最新版 <code>5.3.7</code> 的 <a href="https://pecl.php.net/package/redis" target="_blank" rel="noreferrer">redis 扩展</a>。</p><p>下面以 PHP 8.2 安装 redis 扩展为例。</p><ol><li><p>使用 <code>wget</code> 下载 <code>redis-5.3.7.tgz</code> 压缩包</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">wget</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://pecl.php.net/get/redis-5.3.7.tgz</span></span></code></pre></div></li><li><p>解压并进入到目录</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">tar</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-5.3.7.tgz</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis-5.3.7</span></span></code></pre></div></li><li><p>执行 <code>phpize</code> （根据当前 PHP 版本不同找到对应的可执行文件 <code>phpize</code> ）</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">/opt/homebrew/opt/php@8.2/bin/phpize</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># M1</span></span>
<span class="line"><span style="color:#FFCB6B;">/usr/local/Cellar/php/8.2.3/bin/phpize</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># Intel</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 执行完毕之后当前目录下生成 configure 文件</span></span></code></pre></div></li><li><p>配置（根据当前 PHP 版本不同找到对应的可执行文件 <code>php-config</code>）</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">./configure --with-php-config=/opt/homebrew/opt/php@8.2/bin/php-config # M1</span></span>
<span class="line"><span style="color:#A6ACCD;">./configure --with-php-config=/usr/local/Cellar/php/8.2.3/bin/php-config # Intel</span></span></code></pre></div></li><li><p>执行安装</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">make</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span></span></code></pre></div></li><li><p>添加扩展</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#89DDFF;">EOT</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /opt/homebrew/etc/php/8.2/conf.d/ext-redis.ini</span></span>
<span class="line"><span style="color:#C3E88D;"> [redis]</span></span>
<span class="line"><span style="color:#C3E88D;"> extension=redis.so</span></span>
<span class="line"><span style="color:#C3E88D;"> EOT</span></span></code></pre></div></li><li><p>检查</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">php</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis</span></span></code></pre></div></li></ol><h2 id="brew-php-switcher" tabindex="-1"><a href="https://github.com/philcook/brew-php-switcher" target="_blank" rel="noreferrer">brew-php-switcher</a> <a class="header-anchor" href="#brew-php-switcher" aria-label="Permalink to &quot;[brew-php-switcher](https://github.com/philcook/brew-php-switcher)&quot;">​</a></h2><h3 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">install</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">brew-php-switcher</span></span></code></pre></div><h3 id="检查" tabindex="-1">检查 <a class="header-anchor" href="#检查" aria-label="Permalink to &quot;检查&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">search</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">brew-php-switcher</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ==&gt; Formulae</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># brew-php-switcher ✔</span></span></code></pre></div><h3 id="valet可选" tabindex="-1"><a href="https://laravel.com/docs/master/valet" target="_blank" rel="noreferrer">valet</a>可选 <a class="header-anchor" href="#valet可选" aria-label="Permalink to &quot;[valet](https://laravel.com/docs/master/valet)可选&quot;">​</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">brew-php-switcher</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8.2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-c=valet</span></span></code></pre></div>`,34),t=[e];function o(c,r,i,h,y,d){return a(),p("div",null,t)}const b=s(n,[["render",o]]);export{m as __pageData,b as default};
