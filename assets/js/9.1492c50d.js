(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{363:function(s,t,a){s.exports=a.p+"assets/img/mkcert-notification-message.fd4ecc80.jpeg"},364:function(s,t,a){s.exports=a.p+"assets/img/mamp-apply-ssl-to-protected-website.139040b0.png"},385:function(s,t,a){"use strict";a.r(t);var e=a(44),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"配置-mkcert"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-mkcert"}},[s._v("#")]),s._v(" 配置 mkcert")]),s._v(" "),e("h3",{attrs:{id:"初始化配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始化配置"}},[s._v("#")]),s._v(" 初始化配置")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mkcert -install\n")])])]),e("h3",{attrs:{id:"创建统一存放目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建统一存放目录"}},[s._v("#")]),s._v(" 创建统一存放目录")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p ~/.certs/ "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建对应存放目录")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" -l ~/.certs "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看目录是否存在")]),s._v("\n")])])]),e("h3",{attrs:{id:"生成证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成证书"}},[s._v("#")]),s._v(" 生成证书")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ssl_path")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=~")]),s._v("/.certs\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("domain")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("example.test\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ssl_path}")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建证书对应目录")]),s._v("\n\nmkcert -key-file "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ssl_path}")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v("/privkey.pem "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       -cert-file "),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${ssl_path}")]),s._v("/"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v("/fullchain.pem "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n       "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"www.'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v('"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"m.'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v('"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v('"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*.'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${domain}")]),s._v('"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"localhost"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -l `echo ${ssl_path}/${domain}` # 查看证书文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls -ld `echo ${ssl_path}/${domain}` # 证书所在路径")]),s._v("\n")])])]),e("blockquote",[e("p",[s._v("在执行上面命令的时候，"),e("code",[s._v("ssl_path")]),s._v("可以选择合适的证书存放的路径，"),e("code",[s._v("domain")]),s._v(" 根据实际情况定义，"),e("strong",[s._v("可以根据实际情况后期增减重新执行命令生成")]),s._v("。")])]),s._v(" "),e("p",[s._v("下图是执行成功的一些信息。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(363),alt:"mkcert notification message"}})]),s._v(" "),e("h3",{attrs:{id:"nginx配置ssl证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置ssl证书"}},[s._v("#")]),s._v(" Nginx配置SSL证书")]),s._v(" "),e("p",[s._v("以MAMP客户端为例。")]),s._v(" "),e("ol",[e("li",[s._v("选择要加密的主机")]),s._v(" "),e("li",[s._v("选择SSL选项")]),s._v(" "),e("li",[s._v("打开SSL选项")]),s._v(" "),e("li",[s._v("点击文件夹选择刚刚申请的证书文件，注意一般是"),e("code",[s._v("fullchain.pem")])]),s._v(" "),e("li",[s._v("点击文件夹选择刚刚申请的密钥文件，注意一般是"),e("code",[s._v("privkey.pem")])]),s._v(" "),e("li",[s._v("可选操作，是否强制"),e("code",[s._v("http")]),s._v("跳转到"),e("code",[s._v("https")]),s._v("访问")]),s._v(" "),e("li",[s._v("点击保存，并重启服务")]),s._v(" "),e("li",[s._v("如果配置成功一般在列表处会有一把锁")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(364),alt:"mkcert notification message"}})]),s._v(" "),e("h3",{attrs:{id:"在laravel-mix项目中使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在laravel-mix项目中使用"}},[s._v("#")]),s._v(" 在"),e("code",[s._v("laravel-mix")]),s._v("项目中使用")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("mix"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("browserSync")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    proxy"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://www.example.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    https"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        key"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~/.certs/example.com/privkey.pem"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        cert"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"~/.certs/example.com/fullchain.pem"')]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),e("blockquote",[e("p",[s._v("配置之前需要保证"),e("code",[s._v("https://example.com")]),s._v("能正常访问。")]),s._v(" "),e("p",[e("code",[s._v("key")]),s._v(" 和 "),e("code",[s._v("cert")]),s._v(" 的配置跟当前生成证书时指定的文件保持一致。")])]),s._v(" "),e("h3",{attrs:{id:"在-docker-nginx-中使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#在-docker-nginx-中使用"}},[s._v("#")]),s._v(" 在 Docker nginx 中使用")]),s._v(" "),e("p",[s._v("在项目的配置文件中添加如下样例代码：")]),s._v(" "),e("div",{staticClass:"language-nginx extra-class"},[e("pre",{pre:!0,attrs:{class:"language-nginx"}},[e("code",[e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  example.com")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("301")]),s._v(" https://"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$server_name")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server")])]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("listen")]),s._v("       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("server_name")]),s._v("  example.com")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 容器中公、私钥对应路径")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate")]),s._v("     /etc/nginx/ssl/example.com/fullchain.pem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ssl_certificate_key")]),s._v(" /etc/nginx/ssl/example.com/privkey.pem")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("root")]),s._v("   /usr/share/nginx/html")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token directive"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("index")]),s._v("  index.html index.htm")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ...")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);