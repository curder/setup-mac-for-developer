import{_ as s,c as a,o as n,a as l}from"./app.9ecd2784.js";const p="/setup-mac-for-developer/assets/notification-message.2047a553.jpeg",o="/setup-mac-for-developer/assets/mamp-apply-ssl-to-protected-website.10d1047c.png",h=JSON.parse('{"title":"mkcert","description":"","frontmatter":{},"headers":[{"level":2,"title":"初始化配置","slug":"初始化配置","link":"#初始化配置","children":[]},{"level":2,"title":"创建统一存放目录","slug":"创建统一存放目录","link":"#创建统一存放目录","children":[]},{"level":2,"title":"生成证书","slug":"生成证书","link":"#生成证书","children":[]},{"level":2,"title":"Nginx配置SSL证书","slug":"nginx配置ssl证书","link":"#nginx配置ssl证书","children":[]},{"level":2,"title":"在laravel-mix项目中使用","slug":"在laravel-mix项目中使用","link":"#在laravel-mix项目中使用","children":[]},{"level":2,"title":"在 Docker nginx 中使用","slug":"在-docker-nginx-中使用","link":"#在-docker-nginx-中使用","children":[]}],"relativePath":"guide/config/mkcert.md","lastUpdated":1672984113000}'),e={name:"guide/config/mkcert.md"},t=l('<h1 id="mkcert" tabindex="-1">mkcert <a class="header-anchor" href="#mkcert" aria-hidden="true">#</a></h1><h2 id="初始化配置" tabindex="-1">初始化配置 <a class="header-anchor" href="#初始化配置" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkcert</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-install</span></span>\n<span class="line"></span></code></pre></div><h2 id="创建统一存放目录" tabindex="-1">创建统一存放目录 <a class="header-anchor" href="#创建统一存放目录" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.certs/</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 创建对应存放目录</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#FFCB6B;">ls</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-l</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.certs</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 查看目录是否存在</span></span>\n<span class="line"></span></code></pre></div><h2 id="生成证书" tabindex="-1">生成证书 <a class="header-anchor" href="#生成证书" aria-hidden="true">#</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> ssl_path</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">~/.certs</span></span>\n<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> domain</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">example.test</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">ssl_path</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">domain</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 创建证书对应目录</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#FFCB6B;">mkcert</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-key-file</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">ssl_path</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">domain</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/privkey.pem</span><span style="color:#A6ACCD;"> \\</span></span>\n<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">-cert-file</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">ssl_path</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">domain</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/fullchain.pem</span><span style="color:#A6ACCD;"> \\</span></span>\n<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">www.</span><span style="color:#89DDFF;">${</span><span style="color:#C3E88D;">domain</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">m.</span><span style="color:#89DDFF;">${</span><span style="color:#C3E88D;">domain</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;${</span><span style="color:#C3E88D;">domain</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*.</span><span style="color:#89DDFF;">${</span><span style="color:#C3E88D;">domain</span><span style="color:#89DDFF;">}&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">localhost</span><span style="color:#89DDFF;">&quot;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ls -l `echo ${ssl_path}/${domain}` # 查看证书文件</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># ls -ld `echo ${ssl_path}/${domain}` # 证书所在路径</span></span>\n<span class="line"></span></code></pre></div><blockquote><p>在执行上面命令的时候，<code>ssl_path</code>可以选择合适的证书存放的路径，<code>domain</code> 根据实际情况定义，<strong>可以根据实际情况后期增减重新执行命令生成</strong>。</p></blockquote><p>下图是执行成功的一些信息。</p><p><img src="'+p+'" alt="mkcert notification message"></p><h2 id="nginx配置ssl证书" tabindex="-1">Nginx配置SSL证书 <a class="header-anchor" href="#nginx配置ssl证书" aria-hidden="true">#</a></h2><p>以MAMP客户端为例。</p><ol><li>选择要加密的主机</li><li>选择SSL选项</li><li>打开SSL选项</li><li>点击文件夹选择刚刚申请的证书文件，注意一般是<code>fullchain.pem</code></li><li>点击文件夹选择刚刚申请的密钥文件，注意一般是<code>privkey.pem</code></li><li>可选操作，是否强制<code>http</code>跳转到<code>https</code>访问</li><li>点击保存，并重启服务</li><li>如果配置成功一般在列表处会有一把锁</li></ol><p><img src="'+o+`" alt="mkcert notification message"></p><h2 id="在laravel-mix项目中使用" tabindex="-1">在<code>laravel-mix</code>项目中使用 <a class="header-anchor" href="#在laravel-mix项目中使用" aria-hidden="true">#</a></h2><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">mix</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">browserSync</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">proxy</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://www.example.com</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">https</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">key</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">~/.certs/example.com/privkey.pem</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">cert</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">~/.certs/example.com/fullchain.pem</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>配置之前需要保证<code>https://example.com</code>能正常访问。</p><p><code>key</code> 和 <code>cert</code> 的配置跟当前生成证书时指定的文件保持一致。</p></blockquote><h2 id="在-docker-nginx-中使用" tabindex="-1">在 Docker nginx 中使用 <a class="header-anchor" href="#在-docker-nginx-中使用" aria-hidden="true">#</a></h2><p>在项目的配置文件中添加如下样例代码：</p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> example.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;"> https://</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">server_name</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">request_uri;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">      </span><span style="color:#F78C6C;">443</span><span style="color:#A6ACCD;"> ssl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;"> example.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 容器中公、私钥对应路径</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_certificate </span><span style="color:#A6ACCD;">    /etc/nginx/ssl/example.com/fullchain.pem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_certificate_key </span><span style="color:#A6ACCD;">/etc/nginx/ssl/example.com/privkey.pem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">  /usr/share/nginx/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;"> index.html index.htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># ...</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p><a href="https://ssl-config.mozilla.org/#server=nginx&amp;version=1.17.7&amp;config=intermediate&amp;openssl=1.1.1k&amp;ocsp=false&amp;guideline=5.6" target="_blank" rel="noreferrer">Nginx SSL配置</a></p>`,21),c=[t];function r(i,D,y,C,A,F){return n(),a("div",null,c)}const m=s(e,[["render",r]]);export{h as __pageData,m as default};
